<!DOCTYPE html>
<html>
<head>
    <title>Leggings Emporium</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/shop.css">
</head>
<body>
    <header>
        <table width="100%">
            <tr>
                <td>
                    <h1>Leggings Emporium</h1>
                </td>
                <td class="cart-pic">
                    <a href="cart.html"><img src="ïmages/shopping-cart-64.png"></a>
                </td>
                <td class="cart-status">
                    <span class="cart-count">Items: 0</span>
                    <br />
                    <span class="total">Total: R 0 </span>
                </td>
            </tr>
            <tr>
                <td colspan="3">
                    <nav>
                        <a href="index.html">Home</a>
                        <a href="shop.html">Shop</a>
                        <a class="active" href="cart.html">Cart</a>
                        <a href="#">Contact</a>
                        <a href="#">FAQ</a>
                    </nav>
                </td>
            </tr>
        </table>
    </header>

    <main>
        <div>
            <h2>Shopping Cart Items and Delivery</h2>
        </div>
        <table width=100%>
            <tr>
                <td width="30%" class="checkoutcol">
                    <div class="checkout">
                        <h3>Delivery details</h3>
                        <form>
                            <label for="name">Name:</label>
                            <input type="text" id="name" name="name">
                            <label for="email">Email:</label>
                            <input type="email" id="email" name="email">
                            <label for="address">Address:</label>
                            <input type="text" id="address" name="address">
                            <label for="city">City:</label>
                            <input type="text" id="city" name="city">
                            <label for="state">State/Province:</label>
                            <input type="text" id="state" name="state">
                            <label for="zip">Zip/Postal Code:</label>
                            <input type="text" id="zip" name="zip">
                            <label for="delivery">Delivery Option:</label>
                            <select id="delivery" name="delivery" required>
                                <option value="">Select delivery option</option>
                                <option value="standard">Standard (3-5 business days)</option>
                                <option value="expedited">Expedited (1-2 business days)</option>
                                <option value="overnight">Overnight</option>
                                <option value="colection">Collection</option>
                            </select>
                            <label for="payment">Payment Method:</label>
                            <select id="payment" name="payment" required>
                                <option value="">Select payment method</option>
                                <option value="standard-EFT">Standard EFT</option>
                                <option value="quick-EFT">Immediate EFT</option>
                                <option value="credit-card">Credit/Debit Card</option>
                                <option value="cash-on-delivery">Cash-on-Delivery</option>
                                <option value="e-wallet">e-Wallet</option>
                                <option value="paypal">PayPal</option>
                            </select>
                            <button type="submit">Place Order</button>
                            <a href="index.html"><button type="button">Back</button></a>
                        </form>
                    </div>
                </td>
                <td class="cart-itemlist">
                    <h3>Items in the Cart</h3>
                    <table class="cart-table" width="100%">
                        <thead>
                            <tr>
                                <th>Legging</th>
                                <th>SKU</th>
                                <th>Qty</th>
                                <th>Price</th>
                                <th>Total</th>
                                <th>Select</th>
                            </tr>
                        </thead>
                        <tbody id="table-body" align="center">
                        </tbody>
                    </table>
                    <table class="cart-totals">
                        <thead>
                            <tr><td>Total Price</td><td class="t_price">0</td></tr>
                            <tr><td>No of Items</td><td class="t_items">0</td></tr>
                            <tr><td>Weight per item (g)</td><td class="t_wgtper">0</td></tr>
                            <tr><td>Total Weight (g)</td><td class="t_wgt">0</td></tr>
                            <tr><td>Delivery cost</td><td class="t_del">0</td></tr>
                            <tr><td style="font-weight: bold">Total Price with Delivery</td><td class="t_all">0</td></tr>
                        </thead>
                        <tbody id="table-body2" align="center">
                        </tbody>
                    </table>
                </td>
            </tr>
        </table>


        <br />
        <div class="payment">
            <h3>Payment details</h3>
            <form>
                <label for="card-number">Card Number:</label>
                <input type="text" id="card-number" name="card-number" required>
                <label for="expiration-date">Expiration Date:</label>
                <input type="text" id="expiration-date" name="expiration-date" required>
                <label for="cvv">CVV:</label>
                <input type="text" id="cvv" name="cvv" required>
                <button type="submit">Place Order</button>
            </form>
        </div>
    </main>
    <footer>
        <p>Contact us:</p>
        <p>Email: somewhere@gmail.com</p>
        <p>Tel (mobile & Whatsapp): 082-672-3452 (South Africa)<p>
        <p>Address: Brackendown, Alberton, Gauteng, South Africa</p>
        <a href="#"><img src="ïmages/facebook-3-xl.png" width="20" /></a>
        <a href="#"><img src="ïmages/instagram-3-xl.png" width="20" /></a>
        <a href="#"><img src="ïmages/whatsapp-xl.png" width="20" /></a>
    </footer>
    <script>
        window.addEventListener('load', function () {
            const input2 = document.querySelector(".cart-count");
            input2.innerHTML = window.sessionStorage.getItem('inputValue1');
            const input3 = document.querySelector(".total");
            input3.innerHTML = window.sessionStorage.getItem('inputValue2');
            listSelected();
        });

        function listSelected() {
            if (window.sessionStorage.getItem('cartDataTemp') != null) {
                retJSON = window.sessionStorage.getItem('cartDataTemp')
                cartData = JSON.parse(retJSON);
                const tableBody = document.getElementById('table-body');
                while (tableBody.firstChild) {
                    tableBody.removeChild(tableBody.firstChild);
                }
                var totQ = 0;
                var totP = 0;
                cartData.forEach(item => {
                    const newRow = document.createElement('tr');

                    const newCell1 = document.createElement('td');
                    var img = document.createElement('img');
                    img.src = "ïmages/Leggings Red.jpeg";
                    img.width = "30";
                    newCell1.appendChild(img)
                    newRow.appendChild(newCell1);

                    const newCell2 = document.createElement('td');
                    newCell2.textContent = item.name;
                    newRow.appendChild(newCell2);

                    const newCell3 = document.createElement('td');
                    newCell3.textContent = item.quantity;
                    newRow.appendChild(newCell3);

                    const newCell4 = document.createElement('td');
                    newCell4.textContent = item.price;
                    newRow.appendChild(newCell4);

                    const newCell5 = document.createElement('td');
                    newCell5.textContent = item.quantity * item.price;
                    newRow.appendChild(newCell5);

                    const newCell6 = document.createElement('td');
                    newCell6.textContent = "Y";
                    newRow.appendChild(newCell6);
                    totQ = totQ + parseInt(item.quantity);
                    totP = totP + parseInt(item.price);
                    tableBody.appendChild(newRow);
                });
                document.getElementsByClassName('t_price')[0].innerHTML = totP;
                document.getElementsByClassName('t_items')[0].innerHTML = totQ;
                document.getElementsByClassName('t_wgtper')[0].innerHTML = 10;
                document.getElementsByClassName('t_wgt')[0].innerHTML = totQ * 10;
                document.getElementsByClassName('t_del')[0].innerHTML = totQ * 10 * 5;
                document.getElementsByClassName('t_all')[0].innerHTML = totP + totQ * 10 * 5;
            }
        }
    </script>
</body>
</html>